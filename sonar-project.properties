# SonarCloud Configuration for PV Monitoring Platform
# https://sonarcloud.io

# Project identification
sonar.projectKey=Thosam1_pv-monitoring-platform
sonar.organization=thosam1
sonar.projectName=PV Monitoring Platform
sonar.projectVersion=1.0.0

# Encoding & Quality Gate
sonar.sourceEncoding=UTF-8
sonar.qualitygate.wait=true

# -----------------------------------------------------------------
# MONOREPO CONFIGURATION
# -----------------------------------------------------------------
sonar.modules=backend,frontend

# -----------------------------------------------------------------
# 2. Backend Module
# -----------------------------------------------------------------
backend.sonar.projectBaseDir=backend
backend.sonar.sources=src
backend.sonar.tests=test,src
backend.sonar.test.inclusions=**/*.spec.ts,**/*.e2e-spec.ts
backend.sonar.exclusions=**/node_modules/**,**/dist/**,**/coverage/**
backend.sonar.typescript.lcov.reportPaths=coverage/lcov.info

# Exclude bootstrap/wiring files from coverage (standard NestJS practice)
backend.sonar.coverage.exclusions=**/main.ts,**/*.module.ts,**/index.ts,**/seeds/**,**/*.dto.ts,**/*.entity.ts,**/*.interface.ts,**/test-utils/**

# -----------------------------------------------------------------
# 3. Frontend Module
# -----------------------------------------------------------------
frontend.sonar.projectBaseDir=frontend
frontend.sonar.sources=src
frontend.sonar.exclusions=**/node_modules/**,**/dist/**,**/*.test.tsx,**/*.test.ts

# Frontend coverage report path
frontend.sonar.typescript.lcov.reportPaths=coverage/lcov.info

# Exclude structural frontend code from coverage requirements
# UI components, layout scaffolding, types, and utilities
frontend.sonar.coverage.exclusions=**/*
frontend.sonar.cpd.exclusions=**/components/ui/**,**/lib/utils.ts